의존 관계 주입 방법

1. 생성자 주입 - recommended
생성자를 통해 의존관계를 주입 받는 방법
생성자 호출시점에 딱 한번만 호출되는 것이 보장
-> 불변, 필수 의존관계에 사용
생성자가 딱 한개만 있다면 자동으로 @Autowired가 지정됨
불변: 세팅할 떄만 설정하고 변하지 않음
누락방지: 생성자에 DI를 넣지 않으면 컴파일 오류
final: final을 쓸 수 있어 컴파일단계에서 오류를 잡을 수 있음

2. 수정자(setter) 주입
선택, 변경 가능성이 있는 의존관계에 사용

3. 필드 주입
그냥 사용하지 말자

4. 일반 메서드 주입
그냥 사용하지 말자



옵션 처리
주입할 빈이 없어도 동작해야할 때가 있음
자동 주입 대상이 없으면 오류가 발생함
@Autowired(required=false) : 자동 주입할 대상이 없으면 수정자 메서드 자체가 호출 안됨
org.springframework.lang.@Nullable : 자동 주입할 대상이 없으면 null이 입력
Optional<T> : 자동 주입할 대상이 없으면 Optional.empty 가 입력



조회 대상 빈이 2개 이상일 때 해결법(NoUniqueBeanDefinitionException)
@Autowired 매칭 정리
1. 타입 매칭
2. 타입 매칭의 결과 빈이 2개 이상이면 필드 명, 파라미터 명으로 빈 이름 매칭

@Qualifier("추가이름")
빈 이름을 변경x, 추가 옵션을 제공하는 것
빈 객체 class에 추가 이름을 붙일 수 있다
주입받는 필드 및 생성자에 붙일 수 있다
추가이름은 스트링이라 컴파일 단계에서 오류가 안나기 때문에
깔끔하게 하려면 어노테이션을 하나 만들고 만든 어노테이션 @Qualifier를 붙여서
만든 어노테이션을 사용한다(재정의 해서 사용함)

@Primary
우선순위를 지정, 여러 빈이 매칭되면 우선권을 가짐